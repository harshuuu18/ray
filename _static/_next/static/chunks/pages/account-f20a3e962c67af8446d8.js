(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{1115:function(e,t,s){"use strict";var r=s(5318),a=s(862);t.Z=void 0;var n=a(s(7294)),i=(0,r(s(2108)).default)(n.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");t.Z=i},5281:function(e,t,s){"use strict";var r=s(5318),a=s(862);t.Z=void 0;var n=a(s(7294)),i=(0,r(s(2108)).default)(n.createElement("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");t.Z=i},3429:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var r=s(5861),a=s(2982),n=s(7757),i=s.n(n),c=s(282),l=s(7462),d=s(1839),o=s(5640);var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,d.Z)(e,(0,l.Z)({defaultTheme:o.Z},t))},h=s(9008),m=s(1664),x=s(7294),v=s(1163),j=s(1115),p=s(5281),f=s(2132),g=s(5893),N=u((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"25ch"}}}}));function y(){N();var e=(0,x.useState)([]),t=(e[0],e[1]),s=(0,x.useState)([]),n=s[0],l=s[1],d=(0,x.useState)([]),o=d[0],u=d[1],y=(0,x.useState)({}),S=y[0],b=y[1],D=(0,x.useState)(""),k=D[0],C=D[1],w=(0,x.useState)(""),Z=w[0],I=w[1],A=(0,x.useState)(""),O=A[0],B=A[1],_=(0,x.useState)(""),E=_[0],T=_[1],P=(0,x.useState)(""),U=(P[0],P[1],{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),V=(0,v.useRouter)();(0,x.useEffect)((function(){var e=JSON.parse(localStorage.getItem("items")),s=JSON.parse(localStorage.getItem("user"));if(s){t(e),u(s);var r=s.address;r&&(b(s.address?s.address:{street:"",pin:"",city:"",state:""}),C(r.street),I(r.pin),B(r.city),T(r.state)),fetch("/api/auth/checkOrder",{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}}).then((function(e){e.json().then((function(e){console.log(e.order),l((0,a.Z)(e.order.reverse()))}))})).catch((function(e){return console.log(e)}))}else V.push("/login")}),[]);var J=function(){var e=(0,r.Z)(i().mark((function e(){var t,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k&&Z&&O&&E){e.next=2;break}return e.abrupt("return",f.Am.warn("All fields are mendatory!",U));case 2:return e.prev=2,e.next=5,fetch("/api/auth/updateAddress",{method:"post",headers:{"Content-Type":"application/json",Authorization:o.token},body:JSON.stringify({street:k,pin:Z,city:O,state:E})});case 5:return t=e.sent,e.next=8,t.json();case 8:(s=e.sent).error?f.Am.error(s.error,U):(f.Am.success("update",U),o.address={street:k,pin:Z,city:O,state:E},localStorage.setItem("user",JSON.stringify(o)),V.reload()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),z=function(e){var t=e.cart,s=(e.time,e.payment,e.comment),r=e.voucher,a=e.amount,n=e.orderid,i=e.address,l=e.totalitems,d=e.delivered,o=(0,x.useState)(!1),u=o[0],h=o[1];return(0,g.jsxs)("div",{className:"cartDiv1in",children:[(0,g.jsx)("div",{className:"cartImg",children:(0,g.jsx)("div",{className:"cartActualImg",style:{backgroundImage:"url(".concat(t[0].items[0].mediaUrl,")")}})}),(0,g.jsxs)("div",{className:"cartDetails",children:[(0,g.jsxs)("h3",{children:[" #",n," "]}),(0,g.jsxs)("div",{className:"cartDetailsWBtn",children:[(0,g.jsxs)("div",{className:"cartValue cvl",children:[(0,g.jsxs)("span",{children:["Total Item: ",l]}),(0,g.jsxs)("span",{children:["Status:",(0,g.jsxs)("span",{className:"redBold",children:[" ",d?"Delivered":"Ongoing"," "]})]})]}),(0,g.jsx)("div",{className:"cartButton",children:(0,g.jsx)(c.Z,{className:"cartButtonv2",onClick:function(){h(!u)},children:u?(0,g.jsx)(p.Z,{}):(0,g.jsx)(j.Z,{})})})]})]}),(0,g.jsxs)("div",{className:"detailedOrderDiv",id:u?"showDetail":"hideDetails",children:[(0,g.jsxs)("div",{className:"cdinfo",children:[(0,g.jsxs)("span",{children:[(0,g.jsx)("b",{children:"Amount"}),": ",a," "]}),(0,g.jsxs)("span",{children:[(0,g.jsx)("b",{children:"Status"}),": ",status?"Delivered":"Ongoing"," "]}),(0,g.jsxs)("span",{children:[(0,g.jsx)("b",{children:"comment"}),": ",s," "]}),(0,g.jsxs)("span",{children:[(0,g.jsx)("b",{children:"voucher"}),": ",r," "]})]}),(0,g.jsx)("div",{className:"cdinfo",children:(0,g.jsxs)("span",{children:[(0,g.jsx)("b",{children:"Address"}),": ",i.street,",",i.pin,",",i.city,",",i.state," "]})}),t.map((function(e){var t=e.id,s=e.items,r=e.status,a=e.vendor,n=(0,x.useState)(!1),i=n[0],l=n[1];return(0,g.jsxs)("div",{className:"cartDiv1in cdivln",children:[(0,g.jsx)("div",{className:"cartImg",children:(0,g.jsx)("div",{className:"cartActualImg",style:{backgroundImage:"url(".concat(s[0].mediaUrl,")")}})}),(0,g.jsxs)("div",{className:"cartDetails",children:[(0,g.jsxs)("h3",{children:[" ",a," "]}),(0,g.jsxs)("div",{className:"cartDetailsWBtn",children:[(0,g.jsxs)("div",{className:"cartValue cvl",children:[(0,g.jsxs)("span",{children:["Total Item: ",s.length]}),(0,g.jsxs)("span",{children:["Status:",(0,g.jsxs)("span",{className:"redBold",children:[" ",r," "]})]})]}),(0,g.jsx)("div",{className:"cartButton",children:(0,g.jsx)(c.Z,{className:"cartButtonv2",onClick:function(){l(!i)},children:i?(0,g.jsx)(p.Z,{}):(0,g.jsx)(j.Z,{})})})]})]}),(0,g.jsx)("div",{className:"detailedOrderDiv",id:i?"showDetail":"hideDetails",children:s.map((function(e){var t=e.mediaUrl,s=e.name,r=e.price,a=e.quantity,n=e.url,i=(e.vendor,e._id);e.status;return(0,g.jsxs)("div",{className:"cartDiv1in",children:[(0,g.jsx)("div",{className:"cartImg",children:(0,g.jsx)("div",{className:"cartActualImg",style:{backgroundImage:"url(".concat(t,")")}})}),(0,g.jsxs)("div",{className:"cartDetails cdils",children:[(0,g.jsxs)("h3",{children:[" ",(0,g.jsx)(m.default,{href:"/product/".concat(n),children:(0,g.jsx)("a",{children:s})})," "]}),(0,g.jsx)("div",{className:"cartDetailsWBtn",children:(0,g.jsxs)("div",{className:"cartValue",children:[(0,g.jsxs)("span",{children:["$",r," x ",a]}),(0,g.jsxs)("span",{className:"redBold",children:["$",parseInt(r*a)," "]})]})})]})]},i)}))})]},t)}))]})]})};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(h.default,{children:[(0,g.jsx)("title",{children:"Cart"}),(0,g.jsx)("meta",{name:"description",content:"Shop Quality products online form {Store Name} at best prices with fast delivery"}),(0,g.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,g.jsxs)("div",{className:"cartDiv",children:[(0,g.jsx)("div",{className:"cartDiv1",children:0===n.length?(0,g.jsx)("h1",{children:"Your Cart is empty !"}):n.map((function(e){var t=e.cart,s=e.time,r=e.payment,a=e.comment,n=e.voucher,i=e.amount,c=e.orderid,l=e.address,d=e.totalitems,o=e.delivered;return(0,g.jsx)(z,{address:l,amount:i,comment:a,payment:r,status:status,voucher:n,cart:t,time:s,orderid:c,totalitems:d,delivered:o},c)}))}),(0,g.jsxs)("div",{className:"cartDiv2",style:{height:"600px"},children:[(0,g.jsx)("div",{className:"cartTotal",children:(0,g.jsxs)("main",{children:["Hello ",o.name,"!"]})}),(0,g.jsx)("hr",{}),(0,g.jsxs)("div",{className:"cartComment",children:[(0,g.jsx)("p",{children:"Your Details-"}),(0,g.jsx)("br",{}),o.email,(0,g.jsx)("br",{}),S.street,(0,g.jsx)("br",{}),S.pin,(0,g.jsx)("br",{}),S.city,(0,g.jsx)("br",{}),S.state]}),(0,g.jsx)("hr",{}),(0,g.jsxs)("div",{className:"cartComment",children:[(0,g.jsx)("p",{children:"Update your Address"}),(0,g.jsx)("br",{}),(0,g.jsx)("input",{type:"text",placeholder:"Street name",value:k,onChange:function(e){return C(e.target.value)}}),(0,g.jsx)("input",{type:"text",placeholder:"Pin code",defaultValue:Z,onChange:function(e){return I(e.target.value)}}),(0,g.jsx)("input",{type:"text",placeholder:"City",defaultValue:O,onChange:function(e){return B(e.target.value)}}),(0,g.jsx)("input",{type:"text",placeholder:"State",defaultValue:E,onChange:function(e){return T(e.target.value)}}),(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),(0,g.jsxs)(c.Z,{id:"CheckoutBtn",onClick:function(e){J()},children:[" ","Update"," "]})]})]})]})]})}},3290:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return s(3429)}])},9008:function(e,t,s){e.exports=s(639)},5861:function(e,t,s){"use strict";function r(e,t,s,r,a,n,i){try{var c=e[n](i),l=c.value}catch(d){return void s(d)}c.done?t(l):Promise.resolve(l).then(r,a)}function a(e){return function(){var t=this,s=arguments;return new Promise((function(a,n){var i=e.apply(t,s);function c(e){r(i,a,n,c,l,"next",e)}function l(e){r(i,a,n,c,l,"throw",e)}c(void 0)}))}}s.d(t,{Z:function(){return a}})}},function(e){e.O(0,[774,888,179],(function(){return t=3290,e(e.s=t);var t}));var t=e.O();_N_E=t}]);