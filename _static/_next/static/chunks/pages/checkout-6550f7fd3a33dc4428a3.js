(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{9170:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(5861),n=s(7757),i=s.n(n),a=s(282),c=(s(733),s(1163)),o=s(7294),l=s(2132),u=s(5893);function d(e){var t=e.styles,s=((0,o.useRef)(),(0,c.useRouter)()),n=(0,o.useState)({}),d=n[0],h=n[1],p=(0,o.useState)(""),m=(p[0],p[1],(0,o.useState)("")),x=(m[0],m[1],(0,o.useState)("")),g=(x[0],x[1],(0,o.useState)("")),f=(g[0],g[1],(0,o.useState)()),j=(f[0],f[1],(0,o.useState)(!1)),v=(j[0],j[1],(0,o.useState)([])),k=v[0],w=v[1],y={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},N=(d.time,d.payment),S=d.comment,b=d.voucher,_=d.amount,O=(d.orderid,d.address),C=d.totalitems;d.delivered,d.date;(0,o.useEffect)((function(){var e=JSON.parse(localStorage.getItem("temperory-cart")),t=JSON.parse(localStorage.getItem("user"));h(e),t&&w(t)}),[]);var E=function(){var e=(0,r.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return",l.Am.error("You Cart is empty",y));case 2:return e.prev=2,l.Am.info("Placing Your Order",y),console.log(d),e.next=7,fetch("/api/auth/checkOut",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+k.token},body:JSON.stringify(d)});case 7:return t=e.sent,e.next=10,t.json();case 10:(r=e.sent).message?(l.Am.success("Order placed successfully",y),localStorage.removeItem("temperory-cart"),localStorage.removeItem("items"),s.push("/account")):l.Am.error(r.error,y),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,u.jsx)("div",{className:"modal",style:t,children:(0,u.jsxs)("form",{className:"login-div",style:{height:"80%"},children:[(0,u.jsx)(a.Z,{id:"login-back",onClick:function(e){s.back()},children:"X"}),(0,u.jsxs)("div",{className:"login-heading",children:[(0,u.jsx)("h2",{children:"Welcome to Ecommerce"}),(0,u.jsx)("h5",{children:"Login with Email & Mobile "})]}),(0,u.jsxs)("div",{className:"checkout-detail",children:[(0,u.jsxs)("span",{children:[(0,u.jsx)("img",{src:"/bag512.png",alt:"",width:"15px"}),"Total Item: ",C]}),(0,u.jsxs)("span",{children:[(0,u.jsx)("img",{src:"/rupee.png",alt:"",width:"15px"}),"Total price: ",_]})]}),(0,u.jsxs)("div",{className:"checkout-detail",children:[(0,u.jsxs)("span",{children:[(0,u.jsx)("img",{src:"/user512.png",alt:"",width:"15px"}),k.name]}),(0,u.jsxs)("span",{children:[(0,u.jsx)("img",{src:"/user512.png",alt:"",width:"15px"}),k.email]}),(0,u.jsxs)("span",{children:[(0,u.jsx)("img",{src:"/home512.png",alt:"",width:"15px"}),O?O.street:"",", ","  ",O?O.city:"",",",O?O.state:"",",",O?O.pin:""]})]}),(0,u.jsxs)("div",{className:"checkout-detail",children:[(0,u.jsxs)("span",{children:[(0,u.jsx)("img",{src:"/flash512.png",alt:"",width:"15px"}),"Note: ",S]}),(0,u.jsxs)("span",{children:[(0,u.jsx)("img",{src:"/flash512.png",alt:"",width:"15px"}),"Discount: ",b]})]}),(0,u.jsx)("div",{className:"checkout-detail",children:(0,u.jsxs)("span",{children:[(0,u.jsx)("img",{src:"/rupee.png",alt:"",width:"15px"}),"Payment Status: ",N]})}),(0,u.jsx)("br",{}),(0,u.jsx)(a.Z,{id:"login-button-v",children:"Confirm Payment"}),(0,u.jsx)("br",{}),(0,u.jsx)(a.Z,{id:"login-button",onClick:function(){return E()},children:"Order"})]})})}},354:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return s(9170)}])},5861:function(e,t,s){"use strict";function r(e,t,s,r,n,i,a){try{var c=e[i](a),o=c.value}catch(l){return void s(l)}c.done?t(o):Promise.resolve(o).then(r,n)}function n(e){return function(){var t=this,s=arguments;return new Promise((function(n,i){var a=e.apply(t,s);function c(e){r(a,n,i,c,o,"next",e)}function o(e){r(a,n,i,c,o,"throw",e)}c(void 0)}))}}s.d(t,{Z:function(){return n}})}},function(e){e.O(0,[774,888,179],(function(){return t=354,e(e.s=t);var t}));var t=e.O();_N_E=t}]);